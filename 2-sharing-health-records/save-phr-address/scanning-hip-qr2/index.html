<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.98.0"><meta name=description content="Documentation of various ABDM Building Blocks"><meta name=author content="NHA"><link rel=icon href=/abdm-docs/images/favicon.png type=image/png><title>By scanning HIP QR code - ABDM Sandbox Documentation</title><link href=/abdm-docs/css/nucleus.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/fontawesome-all.min.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/hybrid.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/featherlight.min.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/perfect-scrollbar.min.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/auto-complete.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/atom-one-dark-reasonable.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/theme.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/tabs.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/hugo-theme.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/theme-blue.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/foo.css?1652707403 rel=stylesheet><link href=/abdm-docs/css/bar.css?1652707403 rel=stylesheet><script src=/abdm-docs/js/jquery-3.3.1.min.js?1652707403></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-hip-qr2/><nav id=sidebar><div id=header-wrapper><div id=header><img src=/abdm-docs/img/logo.png></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/abdm-docs/js/lunr.min.js?1652707403></script>
<script type=text/javascript src=/abdm-docs/js/auto-complete.js?1652707403></script>
<script type=text/javascript>var baseurl="http://kiranma72.github.io/abdm-docs"</script><script type=text/javascript src=/abdm-docs/js/search.js?1652707403></script></div><div class=highlightable><ul class=topics><li data-nav-id=/abdm-docs/1-basics/ title="Getting Started" class=dd-item><a href=/abdm-docs/1-basics/><b>1. </b>Getting Started</a><ul><li data-nav-id=/abdm-docs/1-basics/phr_architecture_overview/ title="Understanding the PHR Framework" class=dd-item><a href=/abdm-docs/1-basics/phr_architecture_overview/>Understanding the PHR Framework</a></li><li data-nav-id=/abdm-docs/1-basics/sandbox_signup_page/ title="Sign up to the ABDM Sandbox" class=dd-item><a href=/abdm-docs/1-basics/sandbox_signup_page/>Sign up to the ABDM Sandbox</a></li><li data-nav-id=/abdm-docs/1-basics/integrators_section/ title="Making your app ABDM compliant" class=dd-item><a href=/abdm-docs/1-basics/integrators_section/>Making your app ABDM compliant</a></li><li data-nav-id=/abdm-docs/1-basics/sandbox_request_status_page/ title="Verify you can access the Sandbox" class=dd-item><a href=/abdm-docs/1-basics/sandbox_request_status_page/>Verify you can access the Sandbox</a></li><li data-nav-id=/abdm-docs/1-basics/register_and_link_health_facility/ title="Link your Health Facility" class=dd-item><a href=/abdm-docs/1-basics/register_and_link_health_facility/>Link your Health Facility</a></li><li data-nav-id=/abdm-docs/1-basics/integrators_overview/ title="Making your App ABDM Compilant" class=dd-item><a href=/abdm-docs/1-basics/integrators_overview/>Making your App ABDM Compilant</a></li><li data-nav-id=/abdm-docs/1-basics/working_with_abdm_apis/ title="Working with ABDM APIs" class=dd-item><a href=/abdm-docs/1-basics/working_with_abdm_apis/>Working with ABDM APIs</a></li></ul></li><li data-nav-id=/abdm-docs/2-sharing-health-records/ title="Builing a HRP" class="dd-item
parent"><a href=/abdm-docs/2-sharing-health-records/><b>2. </b>Builing a HRP</a><ul><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/ title="Collect & Save PHR Address" class="dd-item
parent"><a href=/abdm-docs/2-sharing-health-records/save-phr-address/><b>2.1 </b>Collect & Save PHR Address</a><ul><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-hip-qr2/ title="By scanning HIP QR code" class="dd-item active"><a href=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-hip-qr2/>By scanning HIP QR code</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-phraddr-qr/ title="By scanning PHR Address QR" class=dd-item><a href=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-phraddr-qr/>By scanning PHR Address QR</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/shared-verbally/ title="By sharing PHR verbally" class=dd-item><a href=/abdm-docs/2-sharing-health-records/save-phr-address/shared-verbally/>By sharing PHR verbally</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/discovery-from-phrapp/ title="Discovery from PHR Apps" class=dd-item><a href=/abdm-docs/2-sharing-health-records/save-phr-address/discovery-from-phrapp/>Discovery from PHR Apps</a></li></ul></li><li data-nav-id=/abdm-docs/2-sharing-health-records/notify-on-new-records/ title="Notify or Link new records" class=dd-item><a href=/abdm-docs/2-sharing-health-records/notify-on-new-records/><b>2.2 </b>Notify or Link new records</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/push-records/ title="Push the health data" class=dd-item><a href=/abdm-docs/2-sharing-health-records/push-records/><b>2.3 </b>Push the health data</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/using-fhir-for-data/ title="Using FHIR for data" class=dd-item><a href=/abdm-docs/2-sharing-health-records/using-fhir-for-data/><b>2.4 </b>Using FHIR for data</a></li></ul></li><li data-nav-id=/abdm-docs/3-get-health-records/ title="Building a HIU" class=dd-item><a href=/abdm-docs/3-get-health-records/><b>3. </b>Building a HIU</a></li><li data-nav-id=/abdm-docs/4-building-a-phr-app/ title="Building a PHR App" class=dd-item><a href=/abdm-docs/4-building-a-phr-app/><b>4. </b>Building a PHR App</a></li><li data-nav-id=/abdm-docs/5-exiting-sandbox/ title="Sandbox Exit Process" class=dd-item><a href=/abdm-docs/5-exiting-sandbox/><b>5. </b>Sandbox Exit Process</a></li><li data-nav-id=/abdm-docs/6-m1-apis/ title="ABHA Number" class=dd-item><a href=/abdm-docs/6-m1-apis/><b>6. </b>ABHA Number</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/abha-id-registration/ title="Registration for ABHA" class=dd-item><a href=/abdm-docs/6-m1-apis/abha-id-registration/><b>6.1 </b>Registration for ABHA</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/abha-id-registration/registration-via-aadhaar/ title="ABHA ID Registration via Aadhaar" class=dd-item><a href=/abdm-docs/6-m1-apis/abha-id-registration/registration-via-aadhaar/>ABHA ID Registration via Aadhaar</a></li><li data-nav-id=/abdm-docs/6-m1-apis/abha-id-registration/registration-via-other-documents/ title="ABHA ID Registration via Other Documents" class=dd-item><a href=/abdm-docs/6-m1-apis/abha-id-registration/registration-via-other-documents/>ABHA ID Registration via Other Documents</a></li><li data-nav-id=/abdm-docs/6-m1-apis/abha-id-registration/link-delink-abha-addr/ title="Link/De-link of ABHA Address" class=dd-item><a href=/abdm-docs/6-m1-apis/abha-id-registration/link-delink-abha-addr/>Link/De-link of ABHA Address</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/login-abha-id/ title="Login with ABHA (Health ID)" class=dd-item><a href=/abdm-docs/6-m1-apis/login-abha-id/><b>6.2 </b>Login with ABHA (Health ID)</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/login-abha-id/login-with-aadhaar-otp/ title="Login with Aadhaar OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/login-abha-id/login-with-aadhaar-otp/>Login with Aadhaar OTP</a></li><li data-nav-id=/abdm-docs/6-m1-apis/login-abha-id/login-with-mobile-otp/ title="Login with Mobile OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/login-abha-id/login-with-mobile-otp/>Login with Mobile OTP</a></li><li data-nav-id=/abdm-docs/6-m1-apis/login-abha-id/login-using-mobile/ title="Login to your ABHA using Mobile" class=dd-item><a href=/abdm-docs/6-m1-apis/login-abha-id/login-using-mobile/>Login to your ABHA using Mobile</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/retrieve-abha-account/ title="Retrieve your ABHA account" class=dd-item><a href=/abdm-docs/6-m1-apis/retrieve-abha-account/><b>6.3 </b>Retrieve your ABHA account</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/retrieve-abha-account/retrieve-abha-aadhaar-otp/ title="Retrieve ABHA via Aadhaar OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/retrieve-abha-account/retrieve-abha-aadhaar-otp/>Retrieve ABHA via Aadhaar OTP</a></li><li data-nav-id=/abdm-docs/6-m1-apis/retrieve-abha-account/retrieve-abha-mobile-otp/ title="Retrieve ABHA via Mobile OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/retrieve-abha-account/retrieve-abha-mobile-otp/>Retrieve ABHA via Mobile OTP</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/ title="User Profile" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/><b>6.4 </b>User Profile</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/get-profile/ title="Get User profile" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/get-profile/>Get User profile</a></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/get-qr-code/ title="Get User QR Code" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/get-qr-code/>Get User QR Code</a></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/update-email/ title="Update Email" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/update-email/>Update Email</a></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/update-mobile-via-aadhaar-otp/ title="Update Mobile via Aadhaar Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/update-mobile-via-aadhaar-otp/>Update Mobile via Aadhaar Otp</a></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/update-mobile-via-mobile-otp/ title="Update Mobile via Mobile Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/update-mobile-via-mobile-otp/>Update Mobile via Mobile Otp</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/delete-abha/ title="Delete ABHA" class=dd-item><a href=/abdm-docs/6-m1-apis/delete-abha/><b>6.5 </b>Delete ABHA</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/delete-abha/delete-via-aadhaar-otp/ title="Delete via Aadhaar Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/delete-abha/delete-via-aadhaar-otp/>Delete via Aadhaar Otp</a></li><li data-nav-id=/abdm-docs/6-m1-apis/delete-abha/delete-via-mobile-otp/ title="Delete via Mobile Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/delete-abha/delete-via-mobile-otp/>Delete via Mobile Otp</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/deactivate-abha/ title="Deactivate ABHA" class=dd-item><a href=/abdm-docs/6-m1-apis/deactivate-abha/><b>6.6 </b>Deactivate ABHA</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/deactivate-abha/delete-via-aadhaar-otp/ title="Deactivate via Aadhaar Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/deactivate-abha/delete-via-aadhaar-otp/>Deactivate via Aadhaar Otp</a></li><li data-nav-id=/abdm-docs/6-m1-apis/deactivate-abha/deactivate-via-mobile-otp/ title="Deactivate via Mobile Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/deactivate-abha/deactivate-via-mobile-otp/>Deactivate via Mobile Otp</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/reactivate-abha/ title="Reactivate ABHA" class=dd-item><a href=/abdm-docs/6-m1-apis/reactivate-abha/><b>6.7 </b>Reactivate ABHA</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/reactivate-abha/reactivate-abha/ title="Reactivate via Aadhaar OTP or Mobile OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/reactivate-abha/reactivate-abha/>Reactivate via Aadhaar OTP or Mobile OTP</a></li></ul></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/abdm-docs/>ABDM Sandbox Home</a> > <a href=/abdm-docs/2-sharing-health-records/>Builing a HRP</a> > <a href=/abdm-docs/2-sharing-health-records/save-phr-address/>Collect & Save PHR Address</a> > By scanning HIP QR code</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#overview-of-the-functionality>Overview of the functionality</a></li><li><a href=#create-a-qr-code-for-your-health-facility>Create a QR code for your Health Facility</a></li><li><a href=#api-sequence>API Sequence</a></li></ul><ul><li><ul><li><a href=#patient-profile-flow>Patient Profile Flow</a></li><li><a href=#patient-details-verification-flow>Patient Details Verification Flow</a></li></ul></li><li><a href=#api-information-request-response>API Information Request Response</a></li><li><a href=#api-information-request-response-1>API Information Request Response</a><ul><li></li><li><a href=#3-initiate-a-demographic-auth-to-verify-the-phr-address-and-obtain-a-linking-token>3. Initiate a demographic auth to verify the PHR address and obtain a linking token</a></li><li><a href=#4-recieve-the-response-to-phr-address-verification-request>4. Recieve the response to PHR address verification request</a></li><li><a href=#5-send-the-demographics-for-confirmation>5. Send the demographics for confirmation</a></li></ul></li></ul><ul><li><a href=#postman--curl-collection>Postman + Curl Collection</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>By scanning HIP QR code</h1><h2 id=overview-of-the-functionality>Overview of the functionality</h2><p>&#171;&#171;&#171;&lt; HEAD</p><ul><li>Patient must have a PHR app and have a valid PHR address</li><li>Hospital must generate a HIP QR code and display it at the registration counter</li><li>Patient scans the QR code from his phone camera or his PHR app</li><li>If scanned from phone camera &ndash; The list of installed PHR apps is shown on the phone. The user can select any of the apps</li><li>if scanned from within the PHR app, the app will call the share-profile API on the HIE-CM</li><li>The HIE-CM will verify this is a registered healthcare provider and identify the HRP linked to this HIP in the ABDM registry</li><li>The Gateway will call the share-profile api on the callback URL registered for this HRP</li><li>The HRP software must create a screen to display all the scanned profiles for a (counter) code</li><li>The operator (at a counter) should be able to select a shared profile and perform a fast user registration</li><li>Remember to correctly handle this for both new and returning patients</li></ul><p><img src=../scan-hip-qr.png alt="Scan HIP QR Code"></p><h2 id=create-a-qr-code-for-your-health-facility>Create a QR code for your Health Facility</h2><p>=======</p><ul><li>Patient must have a PHR app and have a valid PHR address.</li><li>Hospital must generate a HIP QR code and display it at the registration counter.</li></ul><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>66a9da4d2ebf718de4e5ebc35f88fa963d2802f3</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><p>Generate a QR code for the data in below format. You can use something like <a href=https://www.the-qrcode-generator.com/>Sample QR Generator</a>. ABDM will shortly release a QR code generator that can be used.</p><p>Your HIP ID is the same as the Health Facility Registry ID. You must have linked this HIP ID to your HRP</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;hipId&#34;</span>: <span style=color:#e6db74>&#34;HFR1010342452&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;code&#34;</span>: <span style=color:#e6db74>&#34;any information you want to get back with the scan, e,g counterId, Dept Id&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><img src=/abdm-docs/img/scanning_hip_qrcode.PNG alt="Scan HIP QR Code"></p><ul><li><p>Patient scans the QR code from his phone camera or his PHR app.</p></li><li><p>On scan gateway or HIE-CM will call the HIP with profile.</p></li><li><p>After receiving the patient details the HIP must validate passing it to HIECM.</p></li><li><p>Then HIE-CM will validates patient details and creates a new access token just for the purpose of linking.</p></li><li><p>This new access token is passed to the HIP.</p></li><li><p>The HIP has to call the CM with the new access token to add the care contexts.</p></li><li><p>Get user auth for the action they want to perform. There are two different modes of Authentication:</p><ul><li><strong>Mediated (Mobile OTP, Aadhaar OTP, User Demographics)</strong></li><li><strong>Direct</strong></li></ul><p>While seeking user auth, the HIP must send purpose of auth, current supported purposes are</p><ul><li><strong>LINK</strong>: for purpose of adding care-contexts subsequently. User details are not returned in this case.</li><li><strong>KYC</strong>: for getting basic user details.</li><li><strong>KYC_AND_LINK</strong>: for requesting user details.</li></ul><p>Once the user authentication is confirmed, CM returns “linking token” via /auth/on-confirm API. NOTE for KYC purpose, &ldquo;linking token&rdquo; is not returned.</p></li><li><p>Go to ABHA Mobile Application, then My Profile and Find Scan option on the top right.</p></li><li><p>Scan the QR code, the app should fetch details of QR code along with User profile details.</p></li><li><p>Click on share which will make HIE-CM call the expected API on HIP side.</p></li><li><p>The successful message would be shown on app once the on-share callback is given.</p></li></ul><h2 id=api-sequence>API Sequence</h2><h1 id=scan-hip-qr-code-api-seqshare-profile-hip-qr-api-seqpng>&#171;&#171;&#171;&lt; HEAD
<img src=../share-profile-hip-qr-api-seq.png alt="Scan HIP QR Code API Seq"></h1><h3 id=patient-profile-flow>Patient Profile Flow</h3><p><img src=/abdm-docs/img/scanning-hip-qr-flow.png alt="Patient Share Profile Flow"></p><h3 id=patient-details-verification-flow>Patient Details Verification Flow</h3><p><img src=/abdm-docs/img/patient_profile_verfication_flow.png alt="Patient Details Verification Flow"></p><h2 id=api-information-request-response>API Information Request Response</h2><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>66a9da4d2ebf718de4e5ebc35f88fa963d2802f3</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><h2 id=api-information-request-response-1>API Information Request Response</h2><h4 id=1-users-profile-is-shared-with-the-hrp>1. User&rsquo;s Profile is shared with the HRP</h4><p><strong>URL:</strong> {HRP CALLBACK URL}/v0.5/patients/profile/share
<strong>Request:</strong> POST<br><strong>HEADERS:</strong></p><ul><li>Authorization: JWT Token from Gateway</li><li>X-HIP-ID: hipID that was embedded in the QR code
<strong>Body:</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;499a5a4a-7dda-4f20-9b67-e24589627061&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-10T14:19:12.993Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;profile&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;hipCode&#34;</span>: <span style=color:#e6db74>&#34;12345 (CounterId)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;patient&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;healthId&#34;</span>: <span style=color:#e6db74>&#34;test@sbx&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;healthIdNumber&#34;</span>: <span style=color:#e6db74>&#34;1111-1111-1111-11&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Jane Doe&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;gender&#34;</span>: <span style=color:#e6db74>&#34;F&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;address&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;line&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;district&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;state&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;pincode&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;yearOfBirth&#34;</span>: <span style=color:#ae81ff>2000</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;dayOfBirth&#34;</span>: <span style=color:#ae81ff>27</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;monthOfBirth&#34;</span>: <span style=color:#ae81ff>02</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;identifiers&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;MR&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;value&#34;</span>: <span style=color:#e6db74>&#34;+919800083232&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Request Accepted</p><blockquote><p>Swagger URL: <a href=https://sandbox.abdm.gov.in/swagger/ndhm-hip.yaml>https://sandbox.abdm.gov.in/swagger/ndhm-hip.yaml</a> See the Profile Section</p></blockquote><p>Note that &ldquo;healthId&rdquo;: contains the PHR address of the user and &ldquo;healthIdNumber&rdquo;: contains the linked ABHA no for this PHR address. You need to save the PHR address for the user in your application. You can use the other information provided to quickly register the user.</p><p>&ldquo;hipCode&rdquo;: will contain whatever you put in &ldquo;code&rdquo; as part of the QR</p><h4 id=2-responsed-to-patients-share-profile-request>2. Responsed to patient&rsquo;s share profile request</h4><p><strong>URL:</strong> POST <a href=https://dev.abdm.gov.in/gateway/v0.5/patients/profile/on-share>https://dev.abdm.gov.in/gateway/v0.5/patients/profile/on-share</a>
<strong>Request:</strong><br><strong>HEADERS:</strong></p><ul><li>Authorization: JWT Sessions token</li><li>X-CM-ID: Should be the domain in the PHR Address - @sbx or @abdm
<strong>Body:</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;5f7a535d-a3fd-416b-b069-c97d021fbacd&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-11T04:58:00.037Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;acknowledgement&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;status&#34;</span>: <span style=color:#e6db74>&#34;SUCCESS&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;healthId&#34;</span>: <span style=color:#e6db74>&#34;test@sbx&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;code&#34;</span>: <span style=color:#ae81ff>1000</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;resp&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;499a5a4a-7dda-4f20-9b67-e24589627061&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Request Accepted</p><p>Ensure that the contents of &ldquo;healthID&rdquo; and &ldquo;requestID&rdquo; match the information you got in the share request.</p><p>If there is an issue with the share, set the &ldquo;status&rdquo; to ERROR and provide a clear error message with what went wrong. This will be sent back to the PHR app and displayed to the user</p><h3 id=3-initiate-a-demographic-auth-to-verify-the-phr-address-and-obtain-a-linking-token>3. Initiate a demographic auth to verify the PHR address and obtain a linking token</h3><p><strong>URL:</strong> <a href=https://dev.abdm.gov.in/gateway/v0.5/users/auth/init>https://dev.abdm.gov.in/gateway/v0.5/users/auth/init</a>
<strong>Request:</strong> POST<br><strong>HEADERS:</strong></p><ul><li>Authorization: JWT Sessions token</li><li>X-CM-ID: Should be the domain in the PHR Address - sbx or abdm
<strong>Body:</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;28ac1de6-a2ce-4b8e-8afe-a97f7bb52b85&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-15T15:16:47.21234&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;query&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;test@sbx&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;purpose&#34;</span>: <span style=color:#e6db74>&#34;LINK&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;authMode&#34;</span>: <span style=color:#e6db74>&#34;DEMOGRAPHICS&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requester&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;HIP&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#960050;background-color:#1e0010>HFR</span><span style=color:#ae81ff>1010342452</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Accepted</p><h3 id=4-recieve-the-response-to-phr-address-verification-request>4. Recieve the response to PHR address verification request</h3><p><strong>URL:</strong> {HRP CALLBACK URL}/v0.5/users/auth/on-init
<strong>Request:</strong> POST<br><strong>HEADERS:</strong></p><ul><li>Authorization: GW JWT token</li><li>X-HIP-ID: Same HIP id that was passed in the auth init
<strong>Body:</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;62f31135-7e5b-4714-9a81-4fdcfced2651&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-15T15:16:48.277264&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;auth&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;transactionId&#34;</span>: <span style=color:#e6db74>&#34;ee1d6495-96a3-4fb6-a0fc-f5b33e3e0434&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;mode&#34;</span>: <span style=color:#e6db74>&#34;DEMOGRAPHICS&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;meta&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;hint&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;expiry&#34;</span>: <span style=color:#e6db74>&#34;2022-05-15T17:16:48.277271&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;resp&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;28ac1de6-a2ce-4b8e-8afe-a97f7bb52b85&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong>
202 Accepted</p><h3 id=5-send-the-demographics-for-confirmation>5. Send the demographics for confirmation</h3><p><strong>URL:</strong> <a href=https://dev.abdm.gov.in/gateway/v0.5/users/auth/confirm>https://dev.abdm.gov.in/gateway/v0.5/users/auth/confirm</a>
<strong>Request:</strong> POST<br><strong>HEADERS:</strong></p><ul><li>Authorization: JWT Session Token</li><li>X-CM-ID: The domain in the phr address, sbx or abdm</li></ul><p><strong>Body:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;5f7a535d-a3fd-416b-b069-c97d021fbacd&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-15T15:16:49.87345&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;transactionId&#34;</span>: <span style=color:#e6db74>&#34;ee1d6495-96a3-4fb6-a0fc-f5b33e3e0434&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;credential&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;demographic&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Jane Doe&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;gender&#34;</span>: <span style=color:#e6db74>&#34;F&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;dateOfBirth&#34;</span>: <span style=color:#e6db74>&#34;2000-02-27&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Accepted</p><p>Ensure transaction ID is the same as that recieved in the on-init call. Share the demographics exactly as you got in the profile that was shared. You can send the month / day as 01 if only the year of birth is available as part of dateOfBirth. example &ldquo;2000-01-01&rdquo;</p><ol start=6><li>Get and Save the linking token for this user</li></ol><p><strong>URL:</strong> {HRP Callback URL}/v0.5/users/auth/on-confirm
<strong>Request:</strong> POST<br><strong>Parameters:</strong></p><ul><li><p>Authorization Gateway token</p></li><li><p>X-HIP-ID Same that was passed as HIP ID in auth init</p></li><li><p>X-HIU-ID string (header)</p></li></ul><p><strong>Body:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;9ccbe503-f87a-4f9b-8a0e-d8691d1c9bc3&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-16T12:39:48.906988&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;auth&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;accessToken&#34;</span>: <span style=color:#e6db74>&#34;eyJhbGciOiJSUzUxMiJ9.eyJzdWIiOiJraXJhbm1hQHNieCIsInJlcXVlc3RlclR5cGUiOiJISVAiLCJyZXF1ZXN0ZXJJZCI6IktULUhJUCIsInBhdGllbnRJZCI6ImtpcmFubWFAc2J4Iiwic2Vzc2lvbklkIjoiZWIyNjdhY2UtYTk2NS00MzRjLWJlNjEtYzcyYjA0ZTNhOWM0IiwiZXhwIjoxNjUyNzkxMTg4LCJpYXQiOjE2NTI3MDQ3ODh9.DAPKgCigF_rOh-OFJocizsOlawDGnCZNDLvzW6HQswR6u30LzDOyJ_JMbW_8-owH0X-e-GCy-zpaiLDxWaVihDOrc51J7Aps-aeDa-sW8r7jspYCOQp0gyT3CzXl-GIkqiaHjCnHTdu5RA4oMGtGTfXKgpZtSsY5PROsekOFFTDlA3BtXnCd1iSdubdbihPtEKL90-w3PCAdm8gYQql8FaxCmMEcsQnNFn-YqqPwq32BSjbmlS6bEmuUpkWnIpXFcpO4GFvQo4VXRlqSFjFu5cjhi8XA61C1cdxCumv7N4uEEq7DPqJ69JCeY48AakWESAEjuP2pxBPhn8520q4gTg&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;patient&#34;</span>: <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;resp&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;b40fb334-6e22-4bee-8269-bc11b2453d7a&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Accepted</p><p>The &ldquo;accessToken&rdquo; in this response is also reffered to as &ldquo;linking token&rdquo;. This is a one time use token and does not expire till you use it to link a health record with this PHR address. You can save this in your application till you have a new health record available for you to link</p><p>If there is any mismatch between the PHR Address (sent in init) and the demographics (send in confirm) you will get a response that looks like</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;a1882f39-f507-4dfa-8275-fdc275403f4b&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-16T12:31:01.361004&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;auth&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;code&#34;</span>: <span style=color:#ae81ff>1441</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Invalid auth confirm request.&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;resp&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;22c16352-e66b-4cb0-8330-08234957ac55&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=-head>&#171;&#171;&#171;&lt; HEAD</h1><p><strong>Response:</strong></p><p>202 Accepted</p><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>66a9da4d2ebf718de4e5ebc35f88fa963d2802f3</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><h2 id=postman--curl-collection>Postman + Curl Collection</h2><p><strong>Download the Postman Collection</strong> <a href=/abdm-docs/Postman/scanning-hip-qr.json>here</a></p><p><strong>Download the Curls</strong> <a href=/abdm-docs/Curls/scanning-hip-qr.txt>here</a></p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/abdm-docs/js/clipboard.min.js?1652707403></script>
<script src=/abdm-docs/js/perfect-scrollbar.min.js?1652707403></script>
<script src=/abdm-docs/js/perfect-scrollbar.jquery.min.js?1652707403></script>
<script src=/abdm-docs/js/jquery.sticky.js?1652707403></script>
<script src=/abdm-docs/js/featherlight.min.js?1652707403></script>
<script src=/abdm-docs/js/highlight.pack.js?1652707403></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/abdm-docs/js/modernizr.custom-3.6.0.js?1652707403></script>
<script src=/abdm-docs/js/learn.js?1652707403></script>
<script src=/abdm-docs/js/hugo-learn.js?1652707403></script>
<script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>